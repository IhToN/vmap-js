var VMAP=function(){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var o=function t(e){for(var a in s(this,t),this.id=e.getAttribute("id"),this.allowMultipleAds=e.getAttribute("allowMultipleAds"),this.followRedirects=e.getAttribute("followRedirects"),this.vastAdData=null,this.adTagURI=null,this.customData=null,e.childNodes){var i=e.childNodes[a];switch(i.localName){case"AdTagURI":this.adTagURI={templateType:i.getAttribute("templateType"),uri:(i.textContent||i.text||"").trim()};break;case"VASTAdData":for(this.vastAdData=i.firstChild;this.vastAdData&&1!==this.vastAdData.nodeType;)this.vastAdData=this.vastAdData.nextSibling;break;case"CustomAdData":this.customData=i}}};function c(t,e){var a,i=[];for(a in t.childNodes){var n=t.childNodes[a];n.nodeName!==e&&e!=="vmap:".concat(n.nodeName)&&n.nodeName!=="vmap:".concat(e)||i.push(n)}return i}function d(t){var e={attributes:{},children:{},value:{}};e.value=function(t){if(!t||!t.childNodes)return{};var e,a=t.childNodes,i=[];for(e in a){var n=a[e];"#cdata-section"===n.nodeName&&i.push(n)}if(i&&0<i.length)try{return JSON.parse(i[0].data)}catch(t){}var r,s="";for(r in a){var o=a[r];switch(o.nodeName){case"#text":s+=o.textContent.trim();break;case"#cdata-section":s+=o.data}}return s}(t);var a=t.attributes;if(a)for(var i in a){var n=a[i];n.nodeName&&void 0!==n.nodeValue&&null!==n.nodeValue&&(e.attributes[n.nodeName]=n.nodeValue)}var r=t.childNodes;if(r)for(var s in r){var o=r[s];o.nodeName&&"#"!==o.nodeName.substring(0,1)&&(e.children[o.nodeName]=d(o))}return e}var n=function(){function r(t){for(var e in s(this,r),this.timeOffset=t.getAttribute("timeOffset"),this.breakType=t.getAttribute("breakType"),this.breakId=t.getAttribute("breakId"),this.repeatAfter=t.getAttribute("repeatAfter"),this.adSource=null,this.trackingEvents=[],this.extensions=[],t.childNodes){var a=t.childNodes[e];switch(a.localName){case"AdSource":this.adSource=new o(a);break;case"TrackingEvents":for(var i in a.childNodes){var n=a.childNodes[i];"Tracking"===n.localName&&this.trackingEvents.push({event:n.getAttribute("event"),uri:(n.textContent||n.text||"").trim()})}break;case"Extensions":this.extensions=c(a,"Extension").map(d)}}}var t,e,a;return t=r,(e=[{key:"track",value:function(t,e){for(var a in this.trackingEvents){var i,n=this.trackingEvents[a];n.event===t&&(i=n.uri,"error"===n.event&&(i=i.replace("[ERRORCODE]",e)),this.tracker(i))}}},{key:"tracker",value:function(t){"undefined"!=typeof window&&null!==window&&((new Image).src=t)}}])&&i(t.prototype,e),a&&i(t,a),r}();return function t(e){if(s(this,t),!e||!e.documentElement||"VMAP"!==e.documentElement.localName)throw new Error("Not a VMAP document");for(var a in this.version=e.documentElement.getAttribute("version"),this.adBreaks=[],this.extensions=[],e.documentElement.childNodes){var i=e.documentElement.childNodes[a];switch(i.localName){case"AdBreak":this.adBreaks.push(new n(i));break;case"Extensions":this.extensions=c(i,"Extension").map(d)}}}}();
