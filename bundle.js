var VMAP=function(){"use strict";var t=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},e=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),i=function e(i){for(var a in t(this,e),this.id=i.getAttribute("id"),this.allowMultipleAds=i.getAttribute("allowMultipleAds"),this.followRedirects=i.getAttribute("followRedirects"),this.vastAdData=null,this.adTagURI=null,this.customData=null,i.childNodes){var n=i.childNodes[a];switch(n.localName){case"AdTagURI":this.adTagURI={templateType:n.getAttribute("templateType"),uri:(n.textContent||n.text||"").trim()};break;case"VASTAdData":for(this.vastAdData=n.firstChild;this.vastAdData&&1!==this.vastAdData.nodeType;)this.vastAdData=this.vastAdData.nextSibling;break;case"CustomAdData":this.customData=n}}},a=function(){function a(e){for(var n in t(this,a),this.timeOffset=e.getAttribute("timeOffset"),this.breakType=e.getAttribute("breakType"),this.breakId=e.getAttribute("breakId"),this.repeatAfter=e.getAttribute("repeatAfter"),this.adSource=null,this.trackingEvents=[],this.extensions=[],e.childNodes){var r=e.childNodes[n];switch(r.localName){case"AdSource":this.adSource=new i(r);break;case"TrackingEvents":for(var s in r.childNodes){var o=r.childNodes[s];"Tracking"===o.localName&&this.trackingEvents.push({event:o.getAttribute("event"),uri:(o.textContent||o.text||"").trim()})}break;case"Extensions":this.extensions=r.childNodes}}}return e(a,[{key:"track",value:function(t,e){for(var i in this.trackingEvents){var a=this.trackingEvents[i];if(a.event===t){var n=a.uri;"error"===a.event&&(n=n.replace("[ERRORCODE]",e)),this.tracker(n)}}}},{key:"tracker",value:function(t){"undefined"!=typeof window&&null!==window&&((new Image).src=t)}}]),a}();return function e(i){if(t(this,e),null==(null!=i?i.documentElement:void 0)||"VMAP"!==i.documentElement.localName)throw new Error("Not a VMAP document");for(var n in this.version=i.documentElement.getAttribute("version"),this.adBreaks=[],this.extensions=[],i.documentElement.childNodes){var r=i.documentElement.childNodes[n];switch(r.localName){case"AdBreak":this.adBreaks.push(new a(r));break;case"Extensions":this.extensions=r.childNodes}}}}();
